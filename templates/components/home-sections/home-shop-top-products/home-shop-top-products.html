<div class="container stp-container-outer">
    <section class="stp-container">
        <div class="stp-header">
            <h1 class="stp-title">Shop Top Products</h1>
            <div class="stp-filters">
                <button class="stp-filter-badge stp-filter-badge-new stp-active" onclick="newProducts()">New</button>
                <button class="stp-filter-badge stp-filter-badge-featured" onclick="featuredProducts()">Featured</button>
                <button class="stp-filter-badge stp-filter-badge-best-seller" onclick="topSellers()">Best Sellers</button>
            </div>
        </div>
        <div class="stp-products-grid">
            {{#each products.new}}
            <div class="stp-product-card new-products">
                <img src="{{getImage image '400x400'}}" alt="{{image.alt}}">
                <div class="stp-product-info">
                    <div class="stp-product-info-container">
                        <div class="stp-product-brand">{{name}}</div>
                        <div class="stp-product-title">{{description}}
                        </div>
                        <div class="stp-product-price">{{price.without_tax.formatted}}</div>
                    </div>
                    <a href="{{add_to_cart_url}}" style="width: 100%;">
                    <button class="stp-add-to-cart">ADD TO CART</button>
                    </a>
                </div>
            </div>
            {{/each}}
             {{#each products.top_sellers}}
            <div class="stp-product-card top-sellers-products d-none">
                <img src="{{getImage image '400x500'}}" alt="{{image.alt}}">
                <div class="stp-product-info">
                    <div class="stp-product-info-container">
                        <div class="stp-product-brand">{{name}}</div>
                        <div class="stp-product-title">{{description}}
                        </div>
                        <div class="stp-product-price">{{price.without_tax.formatted}}</div>
                    </div>
                    <a href="{{add_to_cart_url}}" style="width: 100%;">
                    <button class="stp-add-to-cart">ADD TO CART</button>
                    </a>
                </div>
            </div>
            {{/each}}
             {{#each products.featured}}
            <div class="stp-product-card featured-products d-none">
                <img src="{{getImage image '400x500'}}" alt="{{image.alt}}">
                <div class="stp-product-info">
                    <div class="stp-product-info-container">
                        <div class="stp-product-brand">{{name}}</div>
                        <div class="stp-product-title">{{description}}
                        </div>
                        <div class="stp-product-price">{{price.without_tax.formatted}}</div>
                    </div>
                    <a href="{{add_to_cart_url}}" style="width: 100%;">
                    <button class="stp-add-to-cart">ADD TO CART</button>
                    </a>
                </div>
            </div>
            {{/each}}

        </div>

        <div class="stp-slick-container">
            <button class="fp-nav-btn fp-nav-prev" onclick="prevSTP()" aria-label="Previous" >
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
            <div class="fp-progress-wrapper">
                <div class="fp-progress-bar">
                    <div class="fp-progress-fill"></div>
                </div>
            </div>
            <button class="fp-nav-btn fp-nav-next" onclick="nextSTP()" aria-label="Next">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>

    </section>
</div>
<style>
    /* Progress Indicator */
    .stp-slick-container {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 5% 0 2% 0;
    }

    .stp-slick-container .fp-progress-wrapper {
        display: flex;
        justify-content: center;
    }

    .stp-slick-container .fp-progress-bar {
        width: 600px;
        height: 3px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 1px;
        overflow: hidden;
    }

    .stp-slick-container .fp-progress-fill {
        width: 60%;
        height: 100%;
        background: black;
        border-radius: 1px;
    }

    .stp-slick-container .fp-nav-btn {
        border: none;
        color: black;
        width: 50px;
        height: 10px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .stp-slick-container .fp-nav-btn:focus{
        outline: none !important;
        /* outline-offset: none !important; */
    }

    .slick-prev,
    .slick-next {
        display: none !important;
    }

    @media (max-width: 570px) {

        .stp-slick-container .fp-nav-btn {
            width: 40px;
            height: 40px;
        }

        .stp-slick-container .fp-nav-prev {
            left: 10px;
        }

        .stp-slick-container .fp-nav-next {
            right: 10px;
        }

        .stp-slick-container .fp-progress-bar {
            width: 250px !important;
        }

        .stp-continer {
            padding: 0px;
        }
    }

    .stp-container {
        background: white;
        position: relative;
        padding: 2%;
    }

    .stp-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5%;
    }

    .stp-title {
        font-size: 36px;
        font-weight: bold;
        color: #21205F;
    }

    .stp-filters {
        display: flex;
        gap: 0;
        border-radius: 20px;
        background-color: #F2F0EC;
    }

    .stp-filter-badge {
        padding: 12px 20px;
        border: none;
        color: #0A0A1E;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        border-radius: 0;
        font-family: Arial, Helvetica, sans-serif
    }

    .stp-filter-badge:first-child {
        border-radius: 20px;
    }

    .stp-filter-badge:last-child {
        border-radius: 20px;
    }

    .stp-filter-badge:hover {
        text-decoration: underline;
    }

    .stp-filter-badge.stp-active {
        background: #0A0A1E;
        color: white;
        border-radius: 20px;

    }

    /* .stp-products-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        } */

    .stp-product-card {
        background: white;
        overflow: hidden;
    }

    .stp-product-image {
        width: 100%;
        height: 230px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #999;
        object-fit: contain;
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
    }



    .stp-img-1 {
        background-image: url("https://cdn11.bigcommerce.com/s-edruxktyvk/images/stencil/original/image-manager/gh-4-23-25-1029-72167-1.png?t=1757653386");
    }

    .stp-img-2 {
        background-image: url("https://cdn11.bigcommerce.com/s-edruxktyvk/images/stencil/original/image-manager/cst-3-15-24-1007-50085-1.png?t=1757653416");
    }

    .stp-img-3 {
        background-image: url("https://cdn11.bigcommerce.com/s-edruxktyvk/images/stencil/original/image-manager/dm-2-6-24-1000-61357-1.png?t=1757653420");
    }

    .stp-img-4 {
        background-image: url("https://cdn11.bigcommerce.com/s-edruxktyvk/images/stencil/original/image-manager/dm-4-24-25-1065-68302-1.png?t=1757653422");
    }

    .stp-img-5 {
        background-image: url("https://cdn11.bigcommerce.com/s-edruxktyvk/images/stencil/original/image-manager/dm-4-23-25-1105-31535-1.png?t=1757653425");
    }

    .stp-product-info {
        padding: 15px 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: column;
        gap: 5px;
        min-height: 240px;
    }

    .stp-product-info-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding-top: 7%;
    }

    .stp-product-brand {
        font-size: 12px;
        color: #0A0A1E;
        margin-bottom: 5px;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: 400;
    }

    .stp-product-title {
        font-size: 15px;
        color: #0A0A1E;
        line-height: 150%;
        margin-bottom: 8px;
        text-align: center;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: 500;
        letter-spacing: -0.4px;
    }

    .stp-product-sku {
        font-size: 11px;
        color: #999;
        margin-bottom: 8px;
    }

    .stp-product-price {
        font-size: 14px;
        font-weight: bold;
        color: #0A0A1E;
        margin-bottom: 15px;
        line-height: 150%;
        letter-spacing: -0.4px;

    }

    .stp-product-sale-price {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5%;
    }

    .stp-original-price {
        font-size: 14px;
        color: #961414;
    }

    .stp-dicount-price {
        font-size: 14px;
        color: #0A0A1E;
        text-decoration: line-through;
        font-weight: 500;
    }

    .stp-sale-badge {
        background: #961414;
        color: white;
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 20px;
        letter-spacing: 0px;
        font-weight: 500;
    }

    .stp-add-to-cart {
        width: 100%;
        padding: 15px;
        border: 1.3px solid #21205F;
        background: white;
        color: #21205F;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        border-radius: 10px;
        transition: all 0.3s ease;
    }

    .stp-add-to-cart::after {
        content: '';
        margin-left: 0;
        transition: margin-left 0.5 ease opacity 0.5 ease;
        opacity: 0;
    }

    .stp-add-to-cart:hover::after {
        content: "â†’";
        margin-left: 7px;
        margin-bottom: 5px;
        opacity: 1;
        color: white;
        font-size: 18px;
        font-weight: bold;
    }

    .stp-add-to-cart:hover {
        background: #961414;
        color: white;
        border-color: #961414;
    }

    @media (max-width:768px) {
        .stp-header {
            flex-direction: column;
            margin-bottom: 25%;
        }

        .stp-title {
            padding: 12% 0 5%;
        }
    }

    @media (max-width:570px) {
        .stp-product-card {
            padding: 0 10px;
        }

        .stp-container {
            padding: 0;
        }

        .stp-container-outer.container {
            padding: 0%;
        }

    }

    @media (max-width:390px) {
        .stp-product-title {
            font-size: 13px;
        }

        .stp-product-sale-price {
            display: flex;
            align-items: center;
            gap: 3%;
            width: 100%;
        }

        .stp-product-info {
            min-height: 300px;
        }

        .stp-product-image {
            height: 190px;
        }

    }
    .d-none{
        display: none !important;
    }
</style>

<script>
    console.log($('.stp-products-grid'))
    $('.stp-products-grid').slick({
        infinite: false,
        arrows: true,
        speed: 500,
        slidesToShow: 5,
        slidesToScroll: 1,
        responsive: [
            {
                breakpoint: 1090,
                settings: {
                    slidesToShow: 4
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 570,
                settings: {
                    slidesToShow: 1,
                    centerMode: true,
                    initialSlide: 1
                }
            }
        ]
    });
    
    function isDesktop() {
        return window.innerWidth > 992;
    }
    function isTablet() {
        return window.innerWidth <= 992 && window.innerWidth > 768;
    }
    function isMobile() {
        return window.innerWidth <= 768;
    }
     function getSlidesToShow() {
        if (isDesktop()) {
            return 4;
        }
        if (isTablet()) {
            return 2;
        }
        if (isMobile()) {
            return 2;
        }
    }

    var playersSTP = document.querySelectorAll('.stp-product-card');
    var slidesSTP = getSlidesToShow();
    console.log(slidesSTP);
    var displaySlidesSTP = slidesSTP;
    var playersLengthSTP = playersSTP.length;
    var percentageSTP = (slidesSTP * 100) / playersLengthSTP;

    var progressBarSTP = document.querySelector('.stp-container .fp-progress-fill')
    progressBarSTP && (progressBarSTP.style.width = `${percentageSTP}%`)

    function nextSTP() {
        if (slidesSTP + 1 <= playersLengthSTP) {
            percentageSTP = (((++slidesSTP) * 100) / playersLengthSTP)
            progressBarSTP.style.width = `${percentageSTP}%`
        }
        document.querySelector('.stp-container .slick-next.slick-arrow')?.click()
    }

    function prevSTP() {
        if (slidesSTP - 1 >= displaySlidesSTP) {
            percentageSTP = (((--slidesSTP) * 100) / playersLengthSTP)
            progressBarSTP.style.width = `${percentageSTP}%`
        }
        document.querySelector('.stp-container .slick-prev.slick-arrow')?.click()
    }

    
    document.querySelectorAll('.stp-filter-badge').forEach(badge => {
        badge.addEventListener('click', function () {
            document.querySelectorAll('.stp-filter-badge').forEach(b => b.classList.remove('stp-active'));
            this.classList.add('stp-active');
        });
    });

    const topSellers=()=>{
        const topSellersProducts = document.querySelectorAll('.top-sellers-products')
        const  newProducts = document.querySelectorAll('.new-products')
        const featuredProducts = document.querySelectorAll('.featured-products')

        topSellersProducts.forEach((p)=>p.classList.remove('d-none'))
        
        newProducts.forEach((e)=>e.classList.add('d-none'));
        if(featuredProducts){
            featuredProducts.foreach((e)=>e.classList.add('d-none'));
        }
    }
     const newProducts=()=>{
        const topSellersProducts = document.querySelectorAll('.top-sellers-products')
        const  newProducts = document.querySelectorAll('.new-products')
        const featuredProducts = document.querySelectorAll('.featured-products')

        topSellersProducts.forEach((p)=>p.classList.add('d-none'))
        newProducts.forEach((e)=>e.classList.remove('d-none'));
        if(featuredProducts){
            featuredProducts.foreach((e)=>e.classList.add('d-none'));
        }
    }
     const featuredProducts=()=>{
        const topSellersProducts = document.querySelectorAll('.top-sellers-products')
        const  newProducts = document.querySelectorAll('.new-products')
        const featuredProducts = document.querySelectorAll('.featured-products')

        topSellersProducts.forEach((p)=>p.classList.add('d-none'))
        newProducts.forEach((e)=>e.classList.add('d-none'));
        if(featuredProducts){
            featuredProducts.foreach((e)=>e.classList.remove('d-none'));
        }
    }
    
</script>